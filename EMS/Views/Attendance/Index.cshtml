@model List<EMS.Models.ClassStudent>

@{
    var cls = ViewBag.Class as EMS.Models.Class;
    DateTime date = ViewBag.Date;
}

<link rel="stylesheet" href="~/css/attendance.css" />

<div class="attendance-container">

    <!-- Back -->
    <a asp-controller="Teacher"
       asp-action="Dashboard"
       class="back-link">
        ← Back to Classes
    </a>

    <!-- Class Header -->
    <div class="class-card">
        <h4>Grade @cls.Grade - @cls.Place</h4>
        <p>@cls.ClassStudents.Count student(s)</p>
    </div>

    <!-- Attendance Form -->
    <form asp-action="Save" method="post">

        <input type="hidden" name="classId" value="@cls.Id" />

        <!-- Toolbar -->
        <div class="attendance-toolbar">
            <input type="date"
                   name="date"
                   value="@date.ToString("yyyy-MM-dd")"
                   class="form-control date-input" />

            <button type="submit" class="btn btn-primary">
                Save Attendance
            </button>
        </div>

        <!-- Student List -->
        <div class="attendance-card">

            @foreach (var cs in Model)
            {
                <div class="student-row">

                    <div>
                        <div class="student-name">@cs.Student.Name</div>
                        <div class="student-code">@cs.Student.StudentCode</div>
                    </div>

                    <div>
                        <input type="checkbox"
                               class="btn-check"
                               name="presentStudentIds"
                               value="@cs.StudentId"
                               id="s_@cs.StudentId"
                               checked />

                        <label class="status-btn"
                               for="s_@cs.StudentId">
                            Present
                        </label>
                    </div>

                </div>
            }

        </div>

    </form>
</div>
