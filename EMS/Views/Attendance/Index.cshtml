@model List<EMS.Models.ClassStudent>
@{
    var cls = ViewBag.Class as EMS.Models.Class;
    DateTime date = ViewBag.Date;
}

<link rel="stylesheet" href="~/css/attendance.css" />

<div class="attendance-container">

    <a asp-controller="Teacher" asp-action="Dashboard" class="back-link">
        ← Back to Classes
    </a>


    <div class="class-card">
        <h4>Grade @cls.Grade - @cls.Place</h4>
        <p>@Model.Count student(s)</p>
    </div>

    @await Html.PartialAsync("_ClassTabs", cls)

    <form asp-action="Save" method="post">
        <input type="hidden" name="classId" value="@cls.Id" />

        <div class="attendance-toolbar">
            <input type="date" name="date"
                   value="@date.ToString("yyyy-MM-dd")"
                   class="form-control date-input" />
            <button class="btn btn-primary">Save Attendance</button>
        </div>

        <div class="attendance-card">
            @foreach (var cs in Model)
            {
                <div class="student-row">
                    <div>
                        <div class="student-name">@cs.Student.Name</div>
                        <div class="student-code">@cs.Student.StudentCode</div>
                    </div>

                    <input type="checkbox"
                           name="presentStudentIds"
                           value="@cs.StudentId"
                           checked />
                </div>
            }
        </div>
    </form>
</div>
